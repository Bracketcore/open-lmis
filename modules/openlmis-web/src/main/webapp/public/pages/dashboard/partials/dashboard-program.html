<!DOCTYPE html>

<!--
  ~ Electronic Logistics Management Information System (eLMIS) is a supply chain management system for health commodities in a developing country setting.
  ~
  ~ Copyright (C) 2015  John Snow, Inc (JSI). This program was produced for the U.S. Agency for International Development (USAID). It was prepared under the USAID | DELIVER PROJECT, Task Order 4.
  ~
  ~ This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<script id="template/accordion/accordion.html" type="text/ng-template">
    <div class="accordion" ng-transclude></div>
</script>

<script id="template/accordion/accordion-group.html" type="text/ng-template">
    <div class="accordion-group">
        <div class="accordion-heading" style="margin-bottom:0; border-bottom:0">
           <a style="bottom:0" class="accordion-toggle" ng-class="{'collapsed':!isOpen,'open':isOpen}" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>
        </div>
        <div class="accordion-body" style="display:block; margin-bottom:0" collapse="!isOpen">

            <div class="accordion-inner" ng-transclude></div>  </div>
    </div>
</script>


<script type="text/ng-template" id="product-summary">
    <div style="width: 600px;">
        <div class="triangle"></div>
        <div class="ns-popover-tooltip">

            <tabset class="table">
                <tab>
                    <tab-heading style="cursor: pointer;"><span openlmis-message="title.overview"></span></tab-heading>
                    <table style="width: 100%;">
                        <thead>
                        <tr class="gradient-header">
                            <th openlmis-message="label.items"></th>
                            <th openlmis-message="label.this.period"></th>
                            <th openlmis-message="label.last.period"></th>
                        </tr>

                        </thead>
                        <tr ng-repeat="item in productSummary">
                            <td>{{item.label}}</td>
                            <td>{{item.this_period}}</td>
                            <td>{{item.last_period}}</td>
                        </tr>
                    </table>

                </tab>
                <tab>
                    <tab-heading style="cursor: pointer;"><span openlmis-message="title.legend"></span></tab-heading>
                    <table class="table">
                        <thead>
                        <tr class="gradient-header">
                            <th openlmis-message="title.legend"></th>
                            <th openlmis-message="title.definition"></th>
                        </tr>
                        </thead>
                        <tr ng-repeat="def in definitions">
                            <td>{{def.label}}</td>
                            <td>{{def.definition}}</td>
                        </tr>
                    </table>

                </tab>
            </tabset>

        </div>
    </div>

</script>

<script type="text/ng-template" id="consumption-chart-info">
        <!--<div class="triangle" style="margin-left: -7px;"></div>-->
        <div class="ns-popover-tooltip">
            <span openlmis-message="message.consumption.chart.info"></span>
        </div>
</script>
<script type="text/ng-template" id="stocking-chart-info">
    <!--<div class="triangle" style="margin-left: -7px;"></div>-->
    <div class="ns-popover-tooltip">
        <span openlmis-message="message.stocking.chart.info"></span>
    </div>
</script>
<script type="text/ng-template" id="losses-chart-info">
    <!--<div class="triangle" style="margin-left: -7px;"></div>-->
    <div class="ns-popover-tooltip">
        <span openlmis-message="message.losses.chart.info"></span>
    </div>
</script>

<script type="text/ng-template" id="facilities-stock-out">
    <div style="width: 600px;">
        <div class="triangle"></div>
        <div class="ns-popover-tooltip" style="max-height: 300px; overflow-y: scroll;">
            <table style="width: 100%; " class="table">
                <thead>
                <tr class="gradient-header">
                    <th openlmis-message="label.facility" rowspan="2"></th>
                    <th openlmis-message="label.stock.on.hand" colspan="2"></th>
                </tr>
                <tr class="gradient-header">
                    <th openlmis-message="label.this.period"></th>
                    <th openlmis-message="label.last.period"></th>
                </tr>

                </thead>
                <tbody>
                <tr ng-repeat="facility in facilities">
                    <td>{{facility.facility_name}}</td>
                    <td>{{facility.stock_in_hand}}</td>
                    <td>{{facility.previous_stock_in_hand}}</td>
                </tr>
                </tbody>

            </table>

        </div>
    </div>

</script>

<div xmlns="http://www.w3.org/1999/html">

    <ng-include src="'/public/pages/dashboard/shared/dashboard-header_new.html'"></ng-include>
    <div class="reporting-header">
        <span style="margin-right: 10px; font-size: 1.2em;"><span openlmis-message="title.dashboard.reporting.rate"></span></span>
        <span><span openlmis-message="label.total"></span>: {{reportingPerformance.total}}</span>
        <span><span openlmis-message="label.expected.to.report"></span>: {{reportingPerformance.expected}}</span>
        <span><span openlmis-message="label.ever.reported"></span>: {{reportingPerformance.ever}}</span>
        <span><span openlmis-message="label.reported.this.period"></span>: {{reportingPerformance.period}} ( {{(reportingPerformance.period/reportingPerformance.expected)*100 | number:0}}%)</span>
        <span><span openlmis-message="label.late.reported"></span>: {{reportingPerformance.late}} ({{(reportingPerformance.late/reportingPerformance.period)*100 | number:0}}%)</span>
        <span><span openlmis-message="label.reporting.on.time"></span>: {{(reportingPerformance.period - reportingPerformance.late)}} ({{((reportingPerformance.period - reportingPerformance.late)/reportingPerformance.period)*100 | number:0}}%)</span>
    </div>
    <div class="row-fluid">
        <div class="span2" style="border-right: solid 1px #EAEFF3">
            <div>
                <div ng-repeat="product in productsTrend">
                    <div style="padding: 10px 30px; border-bottom: solid 1px #EAEFF3; max-width: 100px;">

                        <div style="text-align: center; cursor: pointer;">
                            <input type="checkbox" ng-model="product.selected"  style="float: left; margin-top: 3px"/>
                            <span  ns-popover ng-click="getProductSummary(product.code)"
                                   ns-popover-template="product-summary"
                                   ns-popover-trigger="click"
                                   ns-popover-theme="ns-popover-tooltip-theme"
                                   ns-popover-timeout="1000"
                                   ns-popover-placement="{{adjustPlacement($index)}}"
                                   ns-popover-hide-on-inside-click="false"
                                   ns-popover-hide-on-outside-click="true"
                                   ns-popover-hide-on-button-click="true" style="cursor: pointer; padding: 10px 0px;"> {{product.name}}</span>

                        </div>
                        <spark-line af-data="product.sohTrend" af-option="sparkOption" style="margin-top:5px;"></spark-line>
                        <div style="margin-top:5px; text-align: center">
                            <div ns-popover ng-click="getFacilitiesStockedOut(product.code)"
                                 ns-popover-template="facilities-stock-out"
                                 ns-popover-trigger="click"
                                 ns-popover-theme="ns-popover-tooltip-theme"
                                 ns-popover-timeout="1000"
                                 ns-popover-placement="{{adjustPlacement($index)}}"
                                 ns-popover-hide-on-inside-click="false"
                                 ns-popover-hide-on-outside-click="true"
                                 ns-popover-hide-on-button-click="true" style="cursor: pointer; padding: 10px 0px;">
                                <span ng-class="product.color"
                                      style="  color:white; padding:2px 20px; border-radius:10px; font-size:12px;">{{product.facilityStockedOut | number}}</span>
                            </div>

                        </div>


                    </div>

                </div>
            </div>
        </div>
        <div class="span10">
            <div  ng-if="productsTrend.length > 0" class="row-fluid">
                <div class="span4" ng-repeat="carousel in carousels">
                    <div id="{{carousel.id}}" class="carousel-play-control">
                        <button id="{{carousel.id}}_play" type="button" class="btn btn-default btn-xs" ng-class="{'carousel-playing': carousel.isPlaying, '': !carousel.isPlaying}"  ng-click="carousel.play()" alt="this si">
                            <span class="icon-play"></span>
                        </button>
                        <button id="{{carousel.id}}_pause" type="button" class="btn btn-default btn-xs"  ng-class="{'carousel-paused': !carousel.isPlaying, '': carousel.isPlaying}" ng-click="carousel.pause()">
                            <span class="icon-pause"></span>
                        </button>
                    </div>
                </div>

            </div>

            <div class="row-fluid" ng-repeat="product in productsTrend" ng-if="product.selected" >
                <div class="span4" >

                    <carousel  interval="setInterval('consumption')">
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.consumptionChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.consumption.trend"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="consumption-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.consumptionChart.openPanel, 'icon-plus-sign': !product.consumptionChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_consumption_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="Period" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Consumption"
                                                      column-values="{{product.consumption}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="amc"
                                                      column-values="{{product.amc}}"
                                                      column-type="line"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.periods}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.consumptionChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.district.dispensed"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="consumption-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.consumptionChart.openPanel, 'icon-plus-sign': !product.consumptionChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_dispensed_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Dispensed"
                                                      column-values="{{product.topDispensed.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="amc"
                                                      column-values="{{product.topAmc.values}}"
                                                      column-type="line"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topDispensed.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>

                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.consumptionChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.facility.dispensed"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="consumption-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.consumptionChart.openPanel, 'icon-plus-sign': !product.consumptionChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_facility_dispensed_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="Facility" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Dispensed"
                                                      column-values="{{product.topFacilityDispensed.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="amc"
                                                      column-values="{{product.topFacilityAmc.values}}"
                                                      column-type="line"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topFacilityDispensed.facilities}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>

                    </carousel>

                </div>
                <div class="span4">
                    <carousel  interval="setInterval('stocks')">
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.stockingEfficiencyChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">
                                                <span ><span openlmis-message="title.stock.efficiency.trend"></span> : {{product.name}}</span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="stocking-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.stockingEfficiencyChart.openPanel, 'icon-plus-sign': !product.stockingEfficiencyChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_stockingefficiency_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="Period" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Over Stocked"
                                                      column-values="{{product.overStocked}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Adequetly Stocked"
                                                      column-values="{{product.adequetlyStocked}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Understocked"
                                                      column-values="{{product.understocked}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Stocked Out"
                                                      column-values="{{product.stockedout}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.periods}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.stockingEfficiencyChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.district.stockedout"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="stocking-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.stockingEfficiencyChart.openPanel, 'icon-plus-sign': !product.stockingEfficiencyChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}__district_stockedout_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>
                                        <chart-column column-id="Stocked Out"
                                                      column-values="{{product.topStockedOut.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topStockedOut.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.stockingEfficiencyChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.district.over.stocked"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="stocking-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.stockingEfficiencyChart.openPanel, 'icon-plus-sign': !product.stockingEfficiencyChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_district_overstocked_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Over Stocked"
                                                      column-values="{{product.topOverstocked.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topOverstocked.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.stockingEfficiencyChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.district.adequately.stocked.out"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="stocking-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.stockingEfficiencyChart.openPanel, 'icon-plus-sign': !product.stockingEfficiencyChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_district_adequately_stockedout_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Adequetly Stocked"
                                                      column-values="{{product.topAdequatelystocked.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topAdequatelystocked.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.stockingEfficiencyChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.district.understocked"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="stocking-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.stockingEfficiencyChart.openPanel, 'icon-plus-sign': !product.stockingEfficiencyChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_district_understocked_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Understocked"
                                                      column-values="{{product.topUnderstocked.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topUnderstocked.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                    </carousel>
                </div>
                <div class="span4">
                    <carousel  interval="setInterval('losses')">
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.lossesAndAdjustmentChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.losses.and.adjustment.trend"></span> : {{product.name}}</span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="losses-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.lossesAndAdjustmentChart.openPanel, 'icon-plus-sign': !product.lossesAndAdjustmentChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_losses_and_adjustment_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="Period" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Quantity Lost"
                                                      column-values="{{product.quantityLost}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Damaged"
                                                      column-values="{{product.quantityDamaged}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Expired"
                                                      column-values="{{product.quantityExpired}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.periods}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.lossesAndAdjustmentChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.losses"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="losses-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.lossesAndAdjustmentChart.openPanel, 'icon-plus-sign': !product.lossesAndAdjustmentChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_lost_chart">
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-tooltip value-format-function="formatValue" />
                                            <chart-axis-x axis-position="outer-center" axis-label="District" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Lost"
                                                      column-values="{{product.topLost.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Damaged"
                                                      column-values="{{product.topDamaged.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Expired"
                                                      column-values="{{product.topExpired.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topLost.districts}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.lossesAndAdjustmentChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.facility.losses"></span> : {{product.name}}  </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="losses-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.lossesAndAdjustmentChart.openPanel, 'icon-plus-sign': !product.lossesAndAdjustmentChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <c3chart bindto-id="{{product.name}}_facility_lost_chart">
                                        <chart-tooltip value-format-function="formatValue" />
                                        <chart-axes values-x="x" />
                                        <chart-axis >
                                            <chart-axis-x axis-position="outer-center" axis-label="Facility" axis-height="40"
                                                          axis-type="category" >
                                                <!--<chart-axis-x-tick tick-rotate="50" />-->
                                            </chart-axis-x>
                                            <chart-axis-y>
                                                <chart-axis-y-tick tick-format-function="formatValue" />
                                            </chart-axis-y>
                                        </chart-axis>

                                        <chart-column column-id="Lost"
                                                      column-values="{{product.topFacilityLost.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Damaged"
                                                      column-values="{{product.topFacilityDamaged.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="Quantity Expired"
                                                      column-values="{{product.topFacilityExpired.values}}"
                                                      column-type="bar"/>
                                        <chart-column column-id="x"
                                                      column-values="{{product.topFacilityLost.facilities}}"/>
                                    </c3chart>
                                </accordion-group>
                            </accordion>
                        </slide>
                        <slide>
                            <accordion>
                                <accordion-group class="gray-cascade" is-open="product.lossesAndAdjustmentChart.openPanel">
                                    <accordion-heading >
                                        <div class="accordion-title">
                                            <div class="caption">

                                                <span ><span openlmis-message="title.top.facility.fill.rate"></span> : {{product.name}}   </span>
                                            </div>
                                            <div class="tools">
                                                <i  ng-class="'icon-info-sign'" ns-popover ns-popover-template="losses-chart-info" ns-popover-trigger="mouseenter" ns-popover-theme="ns-popover-tooltip-theme" ns-popover-placement="bottom|right"></i>
                                                <i  ng-class="{'icon-minus-sign': product.lossesAndAdjustmentChart.openPanel, 'icon-plus-sign': !product.lossesAndAdjustmentChart.openPanel}"></i>
                                            </div>
                                        </div>
                                    </accordion-heading>
                                    <table style="width:100%; margin: 10px">
                                        <tr>
                                            <td style="width: 33%" ng-repeat="itemFillRate in product.topFacilityFillrate">
                                                <span class="easychart" style="height: 75px" easypiechart options="getFIllRateOption(itemFillRate.indicator_value)"   percent="itemFillRate.indicator_value">
                                                <span class="easychart-percent" ng-bind="itemFillRate.indicator_value"></span>
                                                </span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 33%" ng-repeat="itemFillRate in product.topFacilityFillrate">
                                                <div style="width: 60%; padding-left: 20px;">{{itemFillRate.facilityname}}</div>
                                            </td>
                                        </tr>
                                    </table>
                                </accordion-group>
                            </accordion>
                        </slide>
                    </carousel>
                </div>
            </div>

        </div>
    </div>

</div>