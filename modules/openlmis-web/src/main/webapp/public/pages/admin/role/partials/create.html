<div ng-hide="rights && role">Loading...</div>
<div ng-show="rights && role">
  <div ng-hide="role.id"><h2>Add new role</h2></div>
  <div ng-show="role.id"><h2>Edit role</h2></div>
  <form ng-submit="saveRole()" id="create-role" name="roleForm" novalidate>
    <div class="app-form">

      <div class="form-row clearfix">
        <div class="span6">
          <label for="name">Role Name <span class="label-required">*</span></label>

          <div class="form-field">
            <input ng-model="role.name" name="name" id="name" type="text" maxlength="50"
                   ng-required="true"/>
            <span class="field-error" ng-show="roleForm.name.$error.required && showError">
              Please fill this value
            </span>
          </div>
        </div>

        <div class="span6">
          <label for="description">Role Description</label>

          <div class="form-field">
            <input ng-model="role.description" name="description" id="description" type="text"
                   maxlength="250"/>
          </div>
        </div>
      </div>

      <div class="form-row clearfix">
        <div class="form-cell">
          <label>Type of Role: <span class="label-required">*</span></label>

          <div class="form-field radio-group">
            <div class="form-inline">
              <input id="adminRoleType" type="radio" name="adminRoleType" value="true" ng-model="role.adminRole" ng-click="showRoleTypeModal(true)"/>
              <label>Admin and General Operations Role</label>
            </div>
            <div class="form-inline">
              <input id="programRoleType" type="radio" name="programRoleType" value="false" ng-model="role.adminRole" ng-click="showRoleTypeModal(false)"/>
              <label>Program and Facility-based Role</label>
            </div>
          </div>
        </div>
      </div>

      <div>
       <label>Assigned Rights: <span class="label-required">*</span></label>
      </div>

      <div class="form-inline">
      <div class="clearfix" ng-class="disableSection">
        <div class="form-cell">
          <label><strong>Admin and General Operations Rights: </strong></label>

          <div class="form-field">
            <div id="rights-{{right.right}}" class="checkbox-list clearfix" ng-repeat="right in adminRights">
              <input id="{{right.right}}" type="checkbox" ng-checked="contains(right.right)"
                     ng-click="updateRights(checked,right)" ng-model="checked"
                     ng-disabled="areRelatedFieldsSelected(right)"/>
              <label for="{{right.right}}">{{right.rightName}}</label>
            </div>
            <span class="field-error" ng-show="showRightError">
              Please select at least one right for the role
            </span>
          </div>
        </div>
      </div>

      <div class="clearfix">
        <div class="form-cell">
          <label><strong>Program and Facility-based Rights </strong></label>

          <div class="form-field">
            <div id="nonAdminRights-{{right.right}}" class="checkbox-list clearfix" ng-repeat="right in nonAdminRights">
              <input id="{{nonAdminRights.right}}" type="checkbox" ng-checked="contains(right.right)"
                     ng-click="updateRights(checked,right)" ng-model="checked"
                     ng-disabled="areRelatedFieldsSelected(right)"/>
              <label for="{{right.right}}">{{right.rightName}}</label>
            </div>
            <span class="field-error" ng-show="showRightError">
              Please select at least one right for the role
            </span>
          </div>
        </div>
      </div>
      </div>

      <div form-toolbar id="action_buttons" class="action-buttons">
        <div class="form-cell button-row pull-left">
          <input type="submit" class="btn btn-primary save-button" value="Save"/>
          <a type="button" ng-href="#/list" class="btn submit-button">Cancel</a>
        </div>
      </div>
      <div class="toolbar-error" id="saveFailMessage" ng-bind="error" ng-show="error"></div>

      <div id="roleTypeModal" modal="roleTypeModal">
        <div class="modal-header"><h3>Change Role Type</h3></div>
        <div class="modal-body">
          <p>If you change the type, all selections in current type will be removed?</p>
        </div>
        <div class="modal-footer">
          <a href="" class="btn btn-primary" ng-click="deSelectRights()">Continue</a>
          <a href="" class="btn" data-dismiss="modal" ng-click="cancel()">Cancel</a>
        </div>
      </div>

    </div>
  </form>
</div>


