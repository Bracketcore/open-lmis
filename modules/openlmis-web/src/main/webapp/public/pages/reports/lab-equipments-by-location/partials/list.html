<!--
~ This program was produced for the U.S. Agency for International Development. It was prepared by the USAID | DELIVER PROJECT, Task Order 4. It is part of a project which utilizes code originally licensed under the terms of the Mozilla Public License (MPL) v2 and therefore is licensed under MPL v2 or later.
~
~ This program is free software: you can redistribute it and/or modify it under the terms of the Mozilla Public License as published by the Mozilla Foundation, either version 2 of the License, or (at your option) any later version.
~
~ This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the Mozilla Public License for more details.
~
~ You should have received a copy of the Mozilla Public License along with this program. If not, see http://www.mozilla.org/MPL/
-->
<style>
    .ng-table th.sortable div {
        /* css-3 */
        white-space: -o-pre-wrap;
        word-wrap: break-word;
        white-space: pre-wrap;
        white-space: -moz-pre-wrap;
        white-space: -pre-wrap;
    }

    .leaflet-popup-content {
        width:auto !important;
    }

    .legendColorBox{
        width:4px;
    }
    .legendLabel{

        padding-left:5px;
    }
    .chart {
        width: 400px;
        height: 200px;
        text-align: left;
        margin-top: 10px;
    }

    #flotTip {
        z-index: 1040;
        display: none;
        position: absolute;
        white-space: nowrap;
        text-align: center;
        color: #FFF;
        text-decoration: none;
        font-size: 0.8em;
        border-radius: 3px;
        padding: 2px 4px;
        background-color: rgba(0, 0, 0, 0.7);
    }
    .chartLegend table {

        padding: 8px;
    }
    #facilityLabEquipmentStatusSummary{
       margin-top:10px;
    }
    .pieLabel {
        font-size: 13px;
        font-weight: bold;
        text-align: center;
        padding: 2px;
    }
    .xaxisLabel,
    .yaxisLabel {
        font-weight: bold;
        color: #666 !important;
    }
</style>
<div class="row-fluid">

    <div class="span12">

        <div class="box-header">
           <h2>Equipment Status By Location Report</h2>
        </div>

        <div class="row show-grid offset2" style="padding-top:4px;">
            <div class="span2"><strong>Key Indicators:</strong></div>
            <div class="span2"><img src="/public/images/not-functioning-marker.png"><strong>All not functioning</strong></div>
            <div class="span3"><img src="/public/images/some-functioning-marker.png"><strong>Some not functioning</strong></div>
            <div class="span4" ><img src="/public/images/all-functioning-marker.png"><strong>All functioning</strong></div>
        </div>
<hr/>
        <div class="row-fluid">

            <div class="sidebar">
                <div class="app-form" style="padding: 5px;">

                    <form ng-submit="filterGrid()"  name="filterForm" novalidate>
                        <div filter-container class="clearfix">
                            <program-filter class="form-cell horizontalFilters" required="true"></program-filter>
                            <!-- <schedule-filter class="form-cell horizontalFilters" required="true"></schedule-filter>
                             <year-filter class="form-cell horizontalFilters" required="true"></year-filter>
                             <period-filter class="form-cell horizontalFilters" required="true"></period-filter>-->
                             <zone-filter class="form-cell horizontalFilters"></zone-filter>
                             <facility-type-filter class="form-cell horizontalFilters" ></facility-type-filter>
                             <facility-filter class="form-cell horizontalFilters"></facility-filter>
                             <equipment-type-filter class="form-cell horizontalFilters"></equipment-type-filter>
                             <equipment-filter class="form-cell horizontalFilters"></equipment-filter>
                        </div>
                    </form>
                </div>
            </div>
            <!-- Ends side bar -->

               <!-- Start content -->
            <div class="content-body">

                <div class="span8">
                    <div style="padding-left: 30px;">
                        <leaflet  width="100%" height="600px" legend="legend" geojson="geojson" layers="layers" markers="markers"></leaflet>
                    </div>
                </div>

                <ng-div class="span4" ng-show="showSummary === true">

                    <div class="box-header">
                        <h2>Equipment Status Summary</h2>
                    </div>

                    <a-float id="equipment-status-summary" style="align-items: center" af-option="equipmentStatusSummaryPieChartOption"
                             af-data="summary" class="chart"></a-float>

                    <div id="facilityLabEquipmentStatusSummary" class="span12 chartLegend"></div>


                    <div class="box-header" style="margin-top:49px;">
                        <h2>Detailed Equipment Reports</h2>
                    </div>

                    <ul>
                       <li><strong><a href="/public/pages/reports/lab-equipments-non-functioning/index.html#/list?{{urlParams}}" style="text-decoration: underline;">Non Functioning Equipment with service contract status</a></strong></li>
                        <li><strong><a  href="/public/pages/reports/lab-equipments-functioning/index.html#/list?{{urlParams}}" style="text-decoration: underline;">Functioning Equipment with service contract status</a></strong></li>
                    </ul>
                </div>

            </ng-div>
            <!-- End content -->

        </div>


    </div>

</div>

<div id="popup-box" modal="successModal" style="width: 850px;">

    <div class="modal-header">
        <h3>{{ title }}</h3>
    </div>
    <div class="modal-body">
        <table class="table table-bordered" style="width: 100%" >
            <thead>
            <tr>
                <th>Facility Code</th>
                <th>Facility Name</th>
                <th>Facility Type</th>
                <th>District</th>
                <th>Equipment Detail</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="f in facilitiesEquipmentStatus">
                <td>{{f.facility_code}}</td>
                <td>{{f.facility_name}}</td>
                <td>{{f.facility_type}}</td>
                <td>{{f.disrict}}</td>
                <td><a href="{{f.url}}">View</a></td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="modal-footer">
        <a class="btn btn-primary pull-right" ng-click="successModal=false;">Close</a>
    </div>
</div>



    </div>